بخش اول: منطق تولید شناسه (ID Generation Logic)
در این سیستم، هر موجودیت (Entity) دارای یک الگوی کدگذاری منحصر‌به‌فرد است که از یک پیش‌وند ثابت شروع شده و به صورت افزایشی ادامه می‌یابد.

۱. کد کاربر (User ID)
پیش‌وند: 10

ساختار: این کد همیشه با عدد ۱۰ شروع می‌شود و ارقام بعدی به صورت شمارنده (Sequence) اضافه می‌شوند.

مثال: 10543

کاربرد: شناسه منحصر‌به‌فرد برای هر مشتری یا کاربر در سیستم.

۲. کد وام (Loan ID)
پیش‌وند: 20

ساختار: این کد همیشه با عدد ۲۰ شروع می‌شود و تا انتها ادامه می‌یابد.

مثال: 20999 یا 201000

کاربرد: شناسه یکتای پرونده وام صادر شده.

۳. کد قسط (Installment Code)
ساختار: این کد ترکیبی است که با «کد وام» شروع شده و با «شماره قسط» تکمیل می‌شود.

فرمت: [LoanID]-[InstallmentNumber]

مثال:

20999-01 (قسط اول از وام ۲۰۹۹۹)

20999-02 (قسط دوم از وام ۲۰۹۹۹)

کاربرد: ردیابی وضعیت پرداخت هر قسط به صورت جداگانه.

۴. کد صندوق (Fund ID)
پیش‌وند: 30

ساختار: این کد همیشه با عدد ۳۰ شروع می‌شود.

مثال: 3015

کاربرد: شناسه صندوق‌های مالی موجود در سیستم که موجودی و تراکنش‌ها در آن مدیریت می‌شود.

بخش دوم: جدول پرداخت‌ها (Payments Table)
در جدول Payments، نوع تراکنش بر اساس پیش‌وند (Prefix) مشخص می‌شود. هر عدد نمایانگر یک فلو (Flow) مالی خاص است.

پیش‌وند ۱: پرداخت وام به مشتری (LoanPayment)
توضیح: این تراکنش زمانی ثبت می‌شود که پروسه وام تکمیل شده و مبلغ وام از صندوق به حساب مشتری واریز می‌شود (Disbursement).

مسیر پول: صندوق ⬅ مشتری

پیش‌وند ۲: دریافت قسط از مشتری (InstallmentPayment)
توضیح: زمانی که مشتری اقدام به بازپرداخت اقساط خود می‌کند، این نوع تراکنش ثبت می‌شود.

مسیر پول: مشتری ⬅ صندوق

پیش‌وند ۳: تراکنش دستی - پرداخت به مشتری (ManualPayment)
توضیح: هرگونه پرداختی که خارج از روال اتوماتیک سیستم وام‌دهی باشد و به صورت دستی توسط ادمین برای مشتری واریز شود.

مسیر پول: صندوق ⬅ مشتری (دستی)

پیش‌وند ۴: تراکنش دستی - دریافت از مشتری (ManualReceipt)
توضیح: هرگونه دریافت وجه از مشتری که به صورت دستی در سیستم ثبت شود (مثلاً اصلاحیه مانده حساب یا واریزهای متفرقه).

مسیر پول: مشتری ⬅ صندوق (دستی)

پیش‌وند ۵: انتقال وجه بین دو صندوق (Transfer)
توضیح: جابجایی نقدینگی بین صندوق‌های داخلی سیستم.

نکته فنی: برای این نوع تراکنش، فیلد DestinationFund_ID در جدول Payments پر می‌شود تا صندوق مقصد مشخص گردد.

مسیر پول: صندوق مبدأ ⬅ صندوق مقصد

پیش‌وند ۶: پرداخت هزینه‌ها (Expense)
توضیح: ثبت خروجی‌های مالی که بابت هزینه‌های جاری سیستم، حقوق، زیرساخت و غیره پرداخت می‌شود.

مسیر پول: صندوق ⬅ هزینه

پیش‌وند ۷: افزایش سرمایه (Capital Injection)
توضیح: ورود پول به سیستم جهت شارژ صندوق‌ها و افزایش قدرت وام‌دهی (توسط سرمایه‌گذار یا مالک).

مسیر پول: سرمایه‌گذار ⬅ صندوق

پیش‌وند ۸: پرداخت هزینه اعتبارسنجی (Validation)
توضیح: مبلغی که سیستم بابت استعلام‌های بانکی و اعتبارسنجی کاربر به سرویس‌های شخص ثالث پرداخت می‌کند.

مسیر پول: صندوق ⬅ سرویس اعتبارسنجی

پیش‌وند ۹: پرداخت مشتری به تامین‌کننده (TransferToStore)
توضیح: در مدل‌های خرید اعتباری، زمانی که مشتری مستقیماً مبلغی را (مثلاً پیش‌پرداخت) به فروشگاه/پذیرنده پرداخت می‌کند.

مسیر پول: مشتری ⬅ فروشگاه (Store)

پیش‌وند ۱۰: انتقال صندوق به تامین‌کننده (StorePayment)
توضیح: تسویه حساب دوره‌ای یا موردی سیستم با فروشگاه‌ها و پذیرندگان طرف قرارداد.

مسیر پول: صندوق ⬅ فروشگاه (Store)





بخش سوم: جدول دسته‌بندی و وضعیت اقساط (Category / Installment Status)
این بخش وضعیت چرخه عمر (Lifecycle) یک قسط را نشان می‌دهد. هر وضعیت دارای دو کد شناسایی است (کد نوع b و کد عددی متناظر).

۱. هنوز موعد سررسید نرسیده (Not Due)
کدها: 11b | 30

توضیح: تاریخ سررسید قسط در آینده است و هنوز زمان پرداخت آن فرا نرسیده است.

۲. سررسید امروز (Due Today)
کدها: 12b | 31

توضیح: تاریخ جاری دقیقاً برابر با تاریخ سررسید قسط است. مشتری باید همین امروز پرداخت را انجام دهد.

۳. پرداخت شده (Fully Paid)
کدها: 13b | 32

توضیح: مبلغ قسط به صورت کامل و موفقیت‌آمیز وصول شده است.

۴. پرداخت ناقص (Partially Paid)
کدها: 14b | 33

توضیح: مشتری بخشی از مبلغ قسط را پرداخت کرده، اما هنوز بدهی برای این قسط باقی مانده است.

۵. پرداخت ناقص با جریمه (Partial with Penalty)
کدها: 15b | 34

توضیح: قسط شامل جریمه دیرکرد شده است؛ مشتری مبلغی را پرداخت کرده اما این مبلغ کل اصل قسط و جریمه را پوشش نداده است.

۶. تسویه پیش از موعد (Early Settlement)
کدها: 16b | 35

توضیح: مشتری قبل از اینکه موعد قسط برسد (یعنی در حالی که وضعیت Not Due بوده)، اقدام به پرداخت و تسویه آن قسط کرده است.

۷. تسویه کامل وام (Full Loan Settlement)
کدها: 17b | 36

توضیح: این وضعیت نشان‌دهنده تسویه کل پرونده وام قبل از موعد است، نه فقط یک قسط خاص.

۸. معوق در دوره تنفس (Overdue - Grace Period)
کدها: 18b | 37

توضیح: تاریخ سررسید گذشته است، اما قسط در بازه زمانی مجاز (۳ روزه) قرار دارد. در این دوره جریمه‌ای به مشتری تعلق نمی‌گیرد.

۹. معوق شده (Overdue)
کدها: 19b | 38

توضیح: دوره تنفس ۳ روزه تمام شده و قسط رسماً معوق شده است. سیستم شروع به محاسبه جریمه دیرکرد می‌کند.

۱۰. مشکوک‌الوصول (Doubtful Debt)
کدها: 20b | 39

توضیح: تاخیر در پرداخت بسیار زیاد شده است. شرط سیستم برای این وضعیت، گذشتن حداقل ۳۵ روز از تاریخ سررسید قسط است.

۱۱. پروسه حقوقی (Legal Process)
کدها: 21b | 40

توضیح: به دلیل عدم پرداخت طولانی مدت، پرونده از حالت عادی خارج شده و وارد مراحل پیگیری قضایی و شکایت شده است.
